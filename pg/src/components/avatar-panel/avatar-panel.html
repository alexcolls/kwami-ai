<div class="panel-header">
  <iconify-icon icon="ph:ghost-duotone" class="panel-icon"></iconify-icon>
  <h2>Avatar</h2>
</div>

<div class="panel-body">
  <!-- Renderer Type Selector -->
  <section class="panel-section">
    <h3>Renderer</h3>
    <div class="renderer-selector">
      <label class="renderer-option active" data-renderer="blob">
        <input type="radio" name="renderer" value="blob" checked>
        <iconify-icon icon="ph:circle-wavy-duotone" class="renderer-icon"></iconify-icon>
        <span class="renderer-label">Blob</span>
      </label>
      <label class="renderer-option" data-renderer="crystal">
        <input type="radio" name="renderer" value="crystal">
        <iconify-icon icon="ph:diamond-duotone" class="renderer-icon"></iconify-icon>
        <span class="renderer-label">Crystal</span>
      </label>
    </div>
  </section>

  <!-- ============================================================== -->
  <!-- BLOB CONTROLS -->
  <!-- ============================================================== -->
  <div id="blob-controls">
    <!-- Skin Selection -->
    <section class="panel-section">
      <h3>Skin</h3>
      <div class="skin-selector">
        <label class="skin-option" data-skin="poles">
          <input type="radio" name="skin" value="poles">
          <span class="skin-preview poles"></span>
          <span class="skin-label">Poles</span>
        </label>
        <label class="skin-option" data-skin="donut">
          <input type="radio" name="skin" value="donut">
          <span class="skin-preview donut"></span>
          <span class="skin-label">Donut</span>
        </label>
        <label class="skin-option" data-skin="vintage">
          <input type="radio" name="skin" value="vintage">
          <span class="skin-preview vintage"></span>
          <span class="skin-label">Vintage</span>
        </label>
      </div>
    </section>

    <!-- Colors -->
    <section class="panel-section">
      <h3>Colors</h3>
      <div class="color-grid">
        <div class="control-group">
          <label>X</label>
          <input type="color" id="color-x" value="#ff0066">
        </div>
        <div class="control-group">
          <label>Y</label>
          <input type="color" id="color-y" value="#00ff66">
        </div>
        <div class="control-group">
          <label>Z</label>
          <input type="color" id="color-z" value="#6600ff">
        </div>
      </div>
    </section>

    <!-- Geometry -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Geometry</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Resolution</label>
            <input type="range" id="resolution" min="60" max="250" step="10" value="180">
            <span class="value">180</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Spikes (Noise Frequency) -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Spikes</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>X</label>
            <input type="range" id="spike-x" min="0" max="4" step="0.05" value="0.2">
            <span class="value">0.20</span>
          </div>
          <div class="control-row">
            <label>Y</label>
            <input type="range" id="spike-y" min="0" max="4" step="0.05" value="0.2">
            <span class="value">0.20</span>
          </div>
          <div class="control-row">
            <label>Z</label>
            <input type="range" id="spike-z" min="0" max="4" step="0.05" value="0.2">
            <span class="value">0.20</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Amplitude (Noise Depth) -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Amplitude</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>X</label>
            <input type="range" id="amplitude-x" min="0.1" max="2" step="0.05" value="0.8">
            <span class="value">0.80</span>
          </div>
          <div class="control-row">
            <label>Y</label>
            <input type="range" id="amplitude-y" min="0.1" max="2" step="0.05" value="0.8">
            <span class="value">0.80</span>
          </div>
          <div class="control-row">
            <label>Z</label>
            <input type="range" id="amplitude-z" min="0.1" max="2" step="0.05" value="0.8">
            <span class="value">0.80</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Time (Animation Speed) -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Time</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>X</label>
            <input type="range" id="time-x" min="0.1" max="10" step="0.1" value="1">
            <span class="value">1.0</span>
          </div>
          <div class="control-row">
            <label>Y</label>
            <input type="range" id="time-y" min="0.1" max="10" step="0.1" value="1">
            <span class="value">1.0</span>
          </div>
          <div class="control-row">
            <label>Z</label>
            <input type="range" id="time-z" min="0.1" max="10" step="0.1" value="1">
            <span class="value">1.0</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Rotation -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Rotation</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>X</label>
            <input type="range" id="rotation-x" min="0" max="0.02" step="0.001" value="0.002">
            <span class="value">0.002</span>
          </div>
          <div class="control-row">
            <label>Y</label>
            <input type="range" id="rotation-y" min="0" max="0.02" step="0.001" value="0.003">
            <span class="value">0.003</span>
          </div>
          <div class="control-row">
            <label>Z</label>
            <input type="range" id="rotation-z" min="0" max="0.02" step="0.001" value="0.001">
            <span class="value">0.001</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Appearance -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Appearance</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Scale</label>
            <input type="range" id="scale" min="0.5" max="10" step="0.1" value="3.2">
            <span class="value">3.2</span>
          </div>
          <div class="control-row">
            <label>Opacity</label>
            <input type="range" id="opacity" min="0" max="1" step="0.01" value="1">
            <span class="value">1.00</span>
          </div>
          <div class="control-row">
            <label>Shininess</label>
            <input type="range" id="shininess" min="1" max="200" step="1" value="50">
            <span class="value">50</span>
          </div>
          <div class="control-row">
            <label>Light</label>
            <input type="range" id="light-intensity" min="0" max="5" step="0.1" value="0">
            <span class="value">0.0</span>
          </div>
        </div>
        <div class="checkbox-row">
          <label class="checkbox-label">
            <input type="checkbox" id="wireframe">
            <span class="checkbox-custom"></span>
            Wireframe
          </label>
        </div>
      </div>
    </section>

    <!-- Interaction -->
    <section class="panel-section collapsible collapsed">
      <h3 class="section-toggle">
        <span>Interaction</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Touch Force</label>
            <input type="range" id="touch-strength" min="0.1" max="3" step="0.1" value="1">
            <span class="value">1.0</span>
          </div>
          <div class="control-row">
            <label>Touch Dur.</label>
            <input type="range" id="touch-duration" min="200" max="3000" step="100" value="1100">
            <span class="value">1100</span>
          </div>
          <div class="control-row">
            <label>Max Touches</label>
            <input type="range" id="max-touch-points" min="1" max="10" step="1" value="5">
            <span class="value">5</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Transitions -->
    <section class="panel-section collapsible collapsed">
      <h3 class="section-toggle">
        <span>Transitions</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Speed</label>
            <input type="range" id="transition-speed" min="0.01" max="0.2" step="0.01" value="0.05">
            <span class="value">0.05</span>
          </div>
          <div class="control-row">
            <label>Think Dur.</label>
            <input type="range" id="thinking-duration" min="1000" max="30000" step="1000" value="10000">
            <span class="value">10s</span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- ============================================================== -->
  <!-- CRYSTAL CONTROLS -->
  <!-- ============================================================== -->
  <div id="crystal-controls" style="display: none;">
    <!-- Formation Selection -->
    <section class="panel-section">
      <h3>Formation</h3>
      <div class="formation-selector">
        <label class="formation-option active" data-formation="constellation">
          <input type="radio" name="formation" value="constellation" checked>
          <iconify-icon icon="ph:shooting-star-duotone" class="formation-icon"></iconify-icon>
          <span class="formation-label">Constellation</span>
        </label>
        <label class="formation-option" data-formation="helix">
          <input type="radio" name="formation" value="helix">
          <iconify-icon icon="ph:dna-duotone" class="formation-icon"></iconify-icon>
          <span class="formation-label">Helix</span>
        </label>
        <label class="formation-option" data-formation="vortex">
          <input type="radio" name="formation" value="vortex">
          <iconify-icon icon="ph:spiral-duotone" class="formation-icon"></iconify-icon>
          <span class="formation-label">Vortex</span>
        </label>
      </div>
    </section>

    <!-- Crystal Colors -->
    <section class="panel-section">
      <h3>Colors</h3>
      <div class="color-grid">
        <div class="control-group">
          <label>Primary</label>
          <input type="color" id="crystal-color-primary" value="#00e5ff">
        </div>
        <div class="control-group">
          <label>Secondary</label>
          <input type="color" id="crystal-color-secondary" value="#7c4dff">
        </div>
        <div class="control-group">
          <label>Accent</label>
          <input type="color" id="crystal-color-accent" value="#ff4081">
        </div>
      </div>
    </section>

    <!-- Core Settings -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Core</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="color-grid" style="margin-bottom: 12px;">
          <div class="control-group">
            <label>Inner</label>
            <input type="color" id="crystal-core-inner" value="#ffffff">
          </div>
          <div class="control-group">
            <label>Outer</label>
            <input type="color" id="crystal-core-outer" value="#00ffff">
          </div>
        </div>
        <div class="slider-group">
          <div class="control-row">
            <label>Glow</label>
            <input type="range" id="crystal-glow" min="0.1" max="3" step="0.1" value="1.2">
            <span class="value">1.2</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Shards -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Shards</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Count</label>
            <input type="range" id="crystal-shard-count" min="8" max="60" step="1" value="24">
            <span class="value">24</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Scale & Rotation -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Transform</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Scale</label>
            <input type="range" id="crystal-scale" min="0.5" max="2" step="0.05" value="1">
            <span class="value">1.00</span>
          </div>
          <div class="control-row">
            <label>Rot X</label>
            <input type="range" id="crystal-rotation-x" min="-0.01" max="0.01" step="0.001" value="0">
            <span class="value">0.000</span>
          </div>
          <div class="control-row">
            <label>Rot Y</label>
            <input type="range" id="crystal-rotation-y" min="-0.01" max="0.01" step="0.001" value="0.002">
            <span class="value">0.002</span>
          </div>
          <div class="control-row">
            <label>Rot Z</label>
            <input type="range" id="crystal-rotation-z" min="-0.01" max="0.01" step="0.001" value="0">
            <span class="value">0.000</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Audio Reactivity -->
    <section class="panel-section collapsible">
      <h3 class="section-toggle">
        <span>Audio Reactivity</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Reactivity</label>
            <input type="range" id="crystal-reactivity" min="0" max="3" step="0.1" value="1.5">
            <span class="value">1.5</span>
          </div>
          <div class="control-row">
            <label>Bass Orbit</label>
            <input type="range" id="crystal-bass-orbit" min="0" max="1" step="0.05" value="0.4">
            <span class="value">0.40</span>
          </div>
          <div class="control-row">
            <label>Mid Rotation</label>
            <input type="range" id="crystal-mid-rotation" min="0" max="1" step="0.05" value="0.6">
            <span class="value">0.60</span>
          </div>
          <div class="control-row">
            <label>High Glow</label>
            <input type="range" id="crystal-high-glow" min="0" max="1" step="0.05" value="0.8">
            <span class="value">0.80</span>
          </div>
        </div>
        <div class="checkbox-row">
          <label class="checkbox-label">
            <input type="checkbox" id="crystal-audio-enabled" checked>
            <span class="checkbox-custom"></span>
            Enable Audio Effects
          </label>
        </div>
      </div>
    </section>

    <!-- Crystal Transitions -->
    <section class="panel-section collapsible collapsed">
      <h3 class="section-toggle">
        <span>Transitions</span>
        <iconify-icon icon="ph:caret-down" class="toggle-icon"></iconify-icon>
      </h3>
      <div class="section-content">
        <div class="slider-group">
          <div class="control-row">
            <label>Speed</label>
            <input type="range" id="crystal-transition-speed" min="0.01" max="0.2" step="0.01" value="0.05">
            <span class="value">0.05</span>
          </div>
          <div class="control-row">
            <label>Think Dur.</label>
            <input type="range" id="crystal-thinking-duration" min="1000" max="30000" step="1000" value="10000">
            <span class="value">10s</span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- ============================================================== -->
  <!-- COMMON CONTROLS -->
  <!-- ============================================================== -->

  <!-- State -->
  <section class="panel-section">
    <h3>State</h3>
    <div class="state-buttons">
      <button class="state-btn active" data-state="idle">
        <iconify-icon icon="ph:moon-stars-duotone"></iconify-icon>
        Idle
      </button>
      <button class="state-btn" data-state="listening">
        <iconify-icon icon="ph:microphone-duotone"></iconify-icon>
        Listen
      </button>
      <button class="state-btn" data-state="thinking">
        <iconify-icon icon="ph:brain-duotone"></iconify-icon>
        Think
      </button>
    </div>
  </section>

  <!-- Actions -->
  <section class="panel-section">
    <h3>Actions</h3>
    <div class="action-buttons">
      <button class="action-btn primary" id="randomize">
        <iconify-icon icon="ph:dice-five-duotone"></iconify-icon>
        Randomize
      </button>
      <button class="action-btn" id="export-gltf">
        <iconify-icon icon="ph:cube-duotone"></iconify-icon>
        Export GLTF
      </button>
      <button class="action-btn" id="reset">
        <iconify-icon icon="ph:arrow-counter-clockwise-duotone"></iconify-icon>
        Reset
      </button>
    </div>
  </section>
</div>
